name: RDP Builder

on:
  workflow_dispatch:
    inputs:
      rdp_id:
        description: "ID cho workflow nÃ y (do bot gá»­i)"
        required: true

jobs:
  build_rdp:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§© BÆ°á»›c 1 â€” Thiáº¿t láº­p mÃ´i trÆ°á»ng
        run: |
          echo "Workflow ID: ${{ github.event.inputs.rdp_id }}"
          mkdir -p rdp

      - name: âš™ï¸ BÆ°á»›c 2 â€” CÃ i Ä‘áº·t hoáº·c mÃ´ phá»ng táº¡o RDP
        run: |
          echo "Báº¯t Ä‘áº§u táº¡o RDP cho ID ${{ github.event.inputs.rdp_id }}"
          # ---- Náº¿u báº¡n cÃ³ script tháº­t thÃ¬ gá»i á»Ÿ Ä‘Ã¢y, vÃ­ dá»¥ ----
          # python scripts/create_rdp.py --id "${{ github.event.inputs.rdp_id }}"
          #
          # Hoáº·c náº¿u Ä‘ang test thÃ¬ giáº£ láº­p:
          echo "192.168.${{ github.event.inputs.rdp_id }}.10" > ipv4.txt
          echo "fe80::${{ github.event.inputs.rdp_id }}" > ipv6.txt
          echo "user_${{ github.event.inputs.rdp_id }}" > user.txt
          echo "pass_${{ github.event.inputs.rdp_id }}" > pass.txt

      - name: ğŸ“¦ BÆ°á»›c 3 â€” Gá»™p output JSON Ä‘á»ƒ bot dá»… Ä‘á»c
        run: |
          echo "{\"ipv4\": \"$(cat ipv4.txt)\", \"ipv6\": \"$(cat ipv6.txt)\", \"username\": \"$(cat user.txt)\", \"password\": \"$(cat pass.txt)\"}" > rdp/rdp_output.json
          cat rdp/rdp_output.json

      - name: ğŸš€ BÆ°á»›c 4 â€” Upload artifact Ä‘á»ƒ bot Ä‘á»c
        uses: actions/upload-artifact@v4
        with:
          name: rdp_output
          path: rdp/rdp_output.json
          retention-days: 1
