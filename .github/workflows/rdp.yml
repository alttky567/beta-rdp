name: RDP Builder

on:
  workflow_dispatch:
    inputs:
      run_id:
        description: "Run ID do bot gá»­i lÃªn"
        required: true

jobs:
  build_rdp:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§© BÆ°á»›c 1 â€” Thiáº¿t láº­p mÃ´i trÆ°á»ng
        run: |
          echo "Workflow run ID: ${{ github.event.inputs.run_id }}"
          mkdir -p rdp

      - name: âš™ï¸ BÆ°á»›c 2 â€” Táº¡o hoáº·c mÃ´ phá»ng RDP
        run: |
          echo "Äang táº¡o RDP cho ID ${{ github.event.inputs.run_id }}..."
          # --- Náº¿u báº¡n cÃ³ script tháº­t, gá»i táº¡i Ä‘Ã¢y ---
          # python scripts/create_rdp.py --id "${{ github.event.inputs.run_id }}"
          #
          # --- Náº¿u Ä‘ang test, mÃ´ phá»ng dá»¯ liá»‡u ---
          echo "192.168.${{ github.event.inputs.run_id }}.10" > ipv4.txt
          echo "fe80::${{ github.event.inputs.run_id }}" > ipv6.txt
          echo "rdpuser" > user.txt
          echo "rdppass123" > pass.txt

      - name: ğŸ“¦ BÆ°á»›c 3 â€” Táº¡o file JSON output
        run: |
          echo "{\"ipv4\": \"$(cat ipv4.txt)\", \"ipv6\": \"$(cat ipv6.txt)\", \"username\": \"$(cat user.txt)\", \"password\": \"$(cat pass.txt)\"}" > rdp/rdp_output.json
          cat rdp/rdp_output.json

      - name: ğŸš€ BÆ°á»›c 4 â€” Upload artifact cho bot Ä‘á»c
        uses: actions/upload-artifact@v4
        with:
          name: rdp_output
          path: rdp/rdp_output.json
          retention-days: 1